@using System.Globalization
@using Marketplace.Entities;
@using Marketplace.Dependencies;

@if (IsPost)
{
    var updatingBuyeruserId = Request["UpdatingBuyerID"]; //ВОЗМОЖНО МОЖНО БУДЕТ УДАЛИТЬ
    var updatingBuyerName = Request["UpdatingBuyerName"];
    var updatingBuyerSurname = Request["UpdatingBuyerSurname"];
    var updatingDoB = Request["UpdatingBuyerDoB"];
    var updatingBuyerEmail = Request["UpdatingBuyerEmail"];

    //var updatingUserDoB = Request["UpdatingUserDoB"];
    int buyerId;
    DateTime dob;
    string dobFormat = "dd.MM.yyyy";

    DateTime.TryParseExact(updatingDoB, dobFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out dob);

    //DateTime.TryParseExact

    //if (int.TryParse(updatingBuyeruserId, out buyerId) && !string.IsNullOrWhiteSpace(updatingBuyerName)
    //    //&& DateTime.TryParseExact(updatingUserDoB, dobFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out dob)
    //    )
    {

        DependencyResolver.Instance.BuyresLogic.EditBuyerData(HttpContext.Current.User.Identity.Name, updatingBuyerName, updatingBuyerSurname, dob, updatingBuyerEmail);

        Response.Redirect("~/Pages/Buyers/PersonalAccountPage");
        return;
    }
}